<!DOCTYPE html>
<html lang="sr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Embed – Najbolje iz Vojvodine</title>
    <meta name="robots" content="noindex" />
    <style>
      :root {
        --bg: #0b1320;
        --card: #121a2b;
        --muted: #a7b0c0;
        --text: #e6edf6;
        --accent: #7bd2ff;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        padding: 0;
        background: var(--bg);
        color: var(--text);
        font: 15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial,
          sans-serif;
      }
      .wrap {
        max-width: 960px;
        margin: 48px auto;
        padding: 0 16px;
      }
      .card {
        background: var(--card);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        padding: 20px;
      }
      h1 {
        font-size: 22px;
        margin: 0 0 12px;
      }
      p {
        color: var(--muted);
        margin: 6px 0 14px;
      }
      code,
      pre {
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      }
      pre {
        background: #0d1424;
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        padding: 14px;
        overflow: auto;
      }
      .row {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
      }
      .btn {
        background: var(--accent);
        color: #002333;
        border: 0;
        border-radius: 10px;
        padding: 10px 14px;
        font-weight: 600;
        cursor: pointer;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .preview {
        margin-top: 18px;
        border-radius: 14px;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .muted {
        color: var(--muted);
      }
      .small {
        font-size: 12px;
      }
      .inputs {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin: 8px 0 0;
      }
      .inputs input {
        background: #0d1424;
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--text);
        padding: 8px 10px;
        border-radius: 8px;
        width: 200px;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <h1>Embed kod</h1>
        <p>
          Ovo je copy-paste snippet koji partner stavlja na svoju stranicu. Po
          potrebi možeš podesiti <em>visinu</em> i destinaciju (<em>src</em>).
        </p>

        <div class="inputs">
          <label
            ><span class="small muted">Širina</span><br /><input
              id="w"
              value="100%"
          /></label>
          <label
            ><span class="small muted">Visina</span><br /><input
              id="h"
              value="600"
          /></label>
          <label style="flex: 1; min-width: 280px"
            ><span class="small muted">Src</span><br />
            <input id="src" value="https://niv.amityintegration.com/app.html" />
          </label>
        </div>

        <pre id="snippet"></pre>
        <button class="btn" id="copy">Kopiraj</button>

        <div class="preview" id="preview"></div>

        <p class="small muted" style="margin-top: 14px">
          Parametri koje podržava loader: <code>data-width</code>,
          <code>data-height</code>, <code>data-src</code>,
          <code>data-title</code>, <code>data-fullscreen</code> (true/false),
          <code>data-rounded</code> (npr. 12px).
        </p>
      </div>
    </div>

    <script>
      const tpl = ({ src, width, height }) =>
        `<script async src="https://niv.amityintegration.com/embed.js"
  data-src="${src}"
  data-width="${width}"
  data-height="${height}"
  data-title="Najbolje iz Vojvodine – mapa"
  data-fullscreen="true"><\/script>`;

      const $w = document.getElementById("w");
      const $h = document.getElementById("h");
      const $src = document.getElementById("src");
      const $snip = document.getElementById("snippet");
      const $copy = document.getElementById("copy");
      const $prev = document.getElementById("preview");

      function render() {
        const data = {
          src: $src.value.trim(),
          width: $w.value.trim(),
          height: $h.value.trim(),
        };
        const code = tpl(data);
        $snip.textContent = code;

        // preview
        $prev.innerHTML = "";
        const holder = document.createElement("div");
        holder.innerHTML = code;
        $prev.appendChild(holder);
        // eval script for preview
        const s = holder.querySelector("script");
        const ns = document.createElement("script");
        [...s.attributes].forEach((a) => ns.setAttribute(a.name, a.value));
        ns.textContent = s.textContent;
        holder.appendChild(ns);
        s.remove();
      }

      [$w, $h, $src].forEach((i) => i.addEventListener("input", render));
      $copy.addEventListener("click", async () => {
        await navigator.clipboard.writeText($snip.textContent);
        $copy.textContent = "Iskopirano ✓";
        setTimeout(() => ($copy.textContent = "Kopiraj"), 1200);
      });

      render();
    </script>
  </body>
</html>
